import{e as Tt,f as Et,g as Rt,h as Ft}from "./chunk-SDWP65H4.js";import{D as Mt,H as vt,I as Lt,K as Bt,L as Dt,M as wt,O as q,a as le,q as ce,u as At,v as ae,w as _,x as Oe,y as Ie}from "./chunk-7ALHBK5C.js";import{A as ft,C as se,D as x,E as ht,F as dt,G as mt,H as pt,I as gt,J as yt,K as xt,L as kt,N as St,P as W,Q as J,T as bt,U as Ct,a as Re,b as T,c as ot,d as it,e as st,g as lt,h as ct,i as d,j as E,k as I,l as at,n as Fe,o as b,p as ne,q as C,r as re,s as P,v as oe,w as ie,y as ut,z as y}from "./chunk-4BCIMHJT.js";var Un= e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=Ue(e.state,n.from);return r.line?$n(e):r.block?Kn(e):!1};function ze(e, t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let o=e(t,n);return o?(r(n.update(o)),!0):!1}}var $n=ze(jn,0);var Hn=ze(zt,0);var Kn=ze((e, t)=>zt(e,t,_n(t)),0);function Ue(e, t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}var j=50;function Jn(e, {open:t,close:n}, r, o){let i=e.sliceDoc(r-j,r),s=e.sliceDoc(o,o+j),l=/\s*$/.exec(i)[0].length,c=/^\s*/.exec(s)[0].length,a=i.length-l;if(i.slice(a-t.length,a)==t&&s.slice(c,c+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:o+c,margin:c&&1}};let u,f;o-r<=2*j?u=f=e.sliceDoc(r,o):(u=e.sliceDoc(r,r+j),f=e.sliceDoc(o-j,o));let h=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(f)[0].length,k=f.length-p-n.length;return u.slice(h,h+t.length)==t&&f.slice(k,k+n.length)==n?{open:{pos:r+h+t.length,margin:/\s/.test(u.charAt(h+t.length))?1:0},close:{pos:o-p-n.length,margin:/\s/.test(f.charAt(k-1))?1:0}}:null}function _n(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),o=n.to<=r.to?r:e.doc.lineAt(n.to);o.from>r.from&&o.from==n.to&&(o=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let i=t.length-1;i>=0&&t[i].to>r.from?t[i].to=o.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:o.to})}return t}function zt(e, t, n=t.selection.ranges){let r=n.map(i=>Ue(t,i.from).block);if(!r.every(i=>i))return null;let o=n.map((i, s)=>Jn(t,r[s],i.from,i.to));if(e!=2&&!o.every(i=>i))return{changes:t.changes(n.map((i, s)=>o[s]?[]:[{from:i.from,insert:r[s].open+" "},{from:i.to,insert:" "+r[s].close}]))};if(e!=1&&o.some(i=>i)){let i=[];for(let s=0,l; s<o.length; s++)if(l=o[s]){let c=r[s],{open:a,close:u}=l;i.push({from:a.pos-c.open.length,to:a.pos+a.margin},{from:u.pos-u.margin,to:u.pos+c.close.length})}return{changes:i}}return null}function jn(e, t, n=t.selection.ranges){let r=[],o=-1;for(let{from:i,to:s}of n){let l=r.length,c=1e9,a=Ue(t,i).line;if(a){for(let u=i; u<=s;){let f=t.doc.lineAt(u);if(f.from>o&&(i==s||s>f.from)){o=f.from;let h=/^\s*/.exec(f.text)[0].length,p=h==f.length,k=f.text.slice(h,h+a.length)==a?h:-1;h<f.text.length&&h<c&&(c=h),r.push({line:f,comment:k,token:a,indent:h,empty:p,single:!1})}u=f.to+1}if(c<1e9)for(let u=l; u<r.length; u++)r[u].indent<r[u].line.text.length&&(r[u].indent=c);r.length==l+1&&(r[l].single=!0)}}if(e!=2&&r.some(i=>i.comment<0&&(!i.empty||i.single))){let i=[];for(let{line:l,token:c,indent:a,empty:u,single:f}of r)(f||!u)&&i.push({from:l.from+a,insert:c+" "});let s=t.changes(i);return{changes:s,selection:t.selection.map(s,1)}}else if(e!=1&&r.some(i=>i.comment>=0)){let i=[];for(let{line:s,comment:l,token:c}of r)if(l>=0){let a=s.from+l,u=a+c.length;s.text[u-s.from]==" "&&u++,i.push({from:a,to:u})}return{changes:i}}return null}var qe=Fe.define(),Yn=Fe.define(),Zn=E.define(),Ut=E.define({combine(e){return P(e,{minDepth:100,newGroupDelay:500,joinToEvent:(t, n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t, n)=>(r, o)=>t(r,o)||n(r,o)})}}),$t=I.define({create(){return We.empty},update(e, t){let n=t.state.facet(Ut),r=t.annotation(qe);if(r){let c=B.fromTransaction(t,r.selection),a=r.side,u=a==0?e.undone:e.done;return c?u=fe(u,u.length,n.minDepth,c):u=_t(u,t.startState.selection),new We(a==0?r.rest:u,a==0?u:r.rest)}let o=t.annotation(Yn);if((o=="full"||o=="before")&&(e=e.isolate()),t.annotation(ne.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let i=B.fromTransaction(t),s=t.annotation(ne.time),l=t.annotation(ne.userEvent);return i?e=e.addChanges(i,s,l,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,l,n.newGroupDelay)),(o=="full"||o=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new We(e.done.map(B.fromJSON),e.undone.map(B.fromJSON))}});function Ht(e={}){return[$t,Ut.of(e),x.domEventHandlers({beforeinput(t, n){let r=t.inputType=="historyUndo"?Kt:t.inputType=="historyRedo"?Ne:null;return r?(t.preventDefault(),r(n)):!1}})]}function he(e, t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let o=n.field($t,!1);if(!o)return!1;let i=o.pop(e,n,t);return i?(r(i),!0):!1}}var Kt=he(0,!1),Ne=he(1,!1),Xn=he(0,!0),Qn=he(1,!0);var B=class e{constructor(t, n, r, o, i){this.changes=t,this.effects=n,this.mapped=r,this.startSelection=o,this.selectionsAfter=i}setSelAfter(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(t){return new e(t.changes&&ct.fromJSON(t.changes),[],t.mapped&&lt.fromJSON(t.mapped),t.startSelection&&d.fromJSON(t.startSelection),t.selectionsAfter.map(d.fromJSON))}static fromTransaction(t, n){let r=v;for(let o of t.startState.facet(Zn)){let i=o(t);i.length&&(r=r.concat(i))}return!r.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,v)}static selection(t){return new e(void 0,v,void 0,void 0,t)}};function fe(e, t, n, r){let o=t+1>n+20?t-n-1:0,i=e.slice(o,t);return i.push(r),i}function er(e, t){let n=[],r=!1;return e.iterChangedRanges((o, i)=>n.push(o,i)),t.iterChangedRanges((o, i, s, l)=>{for(let c=0; c<n.length;){let a=n[c++],u=n[c++];l>=a&&s<=u&&(r=!0)}}),r}function tr(e, t){return e.ranges.length==t.ranges.length&&e.ranges.filter((n, r)=>n.empty!=t.ranges[r].empty).length===0}function Jt(e, t){return e.length?t.length?e.concat(t):e:t}var v=[],nr=200;function _t(e, t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-nr));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),fe(e,e.length-1,1e9,n.setSelAfter(r)))}else return[B.selection([t])]}function rr(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function Pe(e, t){if(!e.length)return e;let n=e.length,r=v;for(; n;){let o=or(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let i=e.slice(0,n);return i[n-1]=o,i}else t=o.mapped,n--,r=o.selectionsAfter}return r.length?[B.selection(r)]:v}function or(e, t, n){let r=Jt(e.selectionsAfter.length?e.selectionsAfter.map(l=>l.map(t)):v,n);if(!e.changes)return B.selection(r);let o=e.changes.map(t),i=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(i):i;return new B(o,b.mapEffects(e.effects,t),s,e.startSelection.map(i),r)}var ir=/^(input\.type|delete)($|\.)/,We=(()=>{class e{constructor(n, r, o=0, i=void 0){this.done=n,this.undone=r,this.prevTime=o,this.prevUserEvent=i}isolate(){return this.prevTime?new e(this.done,this.undone):this}addChanges(n, r, o, i, s){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&n.changes&&(!o||ir.test(o))&&(!c.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,er(c.changes,n.changes))||o=="input.type.compose")?l=fe(l,l.length-1,i.minDepth,new B(n.changes.compose(c.changes),Jt(b.mapEffects(n.effects,c.changes),c.effects),c.mapped,c.startSelection,v)):l=fe(l,l.length,i.minDepth,n),new e(l,v,r,o)}addSelection(n, r, o, i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:v;return s.length>0&&r-this.prevTime<i&&o==this.prevUserEvent&&o&&/^select($|\.)/.test(o)&&tr(s[s.length-1],n)?this:new e(_t(this.done,n),this.undone,r,o)}addMapping(n){return new e(Pe(this.done,n),Pe(this.undone,n),this.prevTime,this.prevUserEvent)}pop(n, r, o){let i=n==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],l=s.selectionsAfter[0]||r.selection;if(o&&s.selectionsAfter.length)return r.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:qe.of({side:n,rest:rr(i),selection:l}),userEvent:n==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let c=i.length==1?v:i.slice(0,i.length-1);return s.mapped&&(c=Pe(c,s.mapped)),r.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:qe.of({side:n,rest:c,selection:l}),filter:!1,userEvent:n==0?"undo":"redo",scrollIntoView:!0})}else return null}}return e.empty=new e(v,v),e})(),jt=[{key:"Mod-z",run:Kt,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ne,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ne,preventDefault:!0},{key:"Mod-u",run:Xn,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Qn,preventDefault:!0}];function V(e, t){return d.create(e.ranges.map(t),e.mainIndex)}function w(e, t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function D({state:e,dispatch:t}, n){let r=V(e.selection,n);return r.eq(e.selection,!0)?!1:(t(w(e,r)),!0)}function de(e, t){return d.cursor(t?e.to:e.from)}function Yt(e, t){return D(e, n=>n.empty?e.moveByChar(n,t):de(n,t))}function S(e){return e.textDirectionAt(e.state.selection.main.head)==ft.LTR}var Zt= e=>Yt(e,!S(e)),Xt= e=>Yt(e,S(e));function Qt(e, t){return D(e, n=>n.empty?e.moveByGroup(n,t):de(n,t))}var sr= e=>Qt(e,!S(e)),lr= e=>Qt(e,S(e));var Io=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function cr(e, t, n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function me(e, t, n){let r=ce(e).resolveInner(t.head),o=n?le.closedBy:le.openedBy;for(let c=t.head;;){let a=n?r.childAfter(c):r.childBefore(c);if(!a)break;cr(e,a,o)?r=a:c=n?a.to:a.from}let i=r.type.prop(o),s,l;return i&&(s=n?q(e,r.from,1):q(e,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,d.cursor(l,n?-1:1)}var ar= e=>D(e, t=>me(e.state,t,!S(e))),ur= e=>D(e, t=>me(e.state,t,S(e)));function en(e, t){return D(e, n=>{if(!n.empty)return de(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}var tn= e=>en(e,!1),nn= e=>en(e,!0);function rn(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0,o;if(t){for(let i of e.state.facet(x.scrollMargins)){let s=i(e);s?.top&&(n=Math.max(s?.top,n)),s?.bottom&&(r=Math.max(s?.bottom,r))}o=e.scrollDOM.clientHeight-n-r}else o=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,o-5)}}function on(e, t){let n=rn(e),{state:r}=e,o=V(r.selection, s=>s.empty?e.moveVertically(s,t,n.height):de(s,t));if(o.eq(r.selection))return!1;let i;if(n.selfScroll){let s=e.coordsAtPos(r.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),c=l.top+n.marginTop,a=l.bottom-n.marginBottom;s&&s.top>c&&s.bottom<a&&(i=x.scrollIntoView(o.main.head,{y:"start",yMargin:s.top-c}))}return e.dispatch(w(r,o),{effects:i}),!0}var Ot= e=>on(e,!1),Ge= e=>on(e,!0);function R(e, t, n){let r=e.lineBlockAt(t.head),o=e.moveToLineBoundary(t,n);if(o.head==t.head&&o.head!=(n?r.to:r.from)&&(o=e.moveToLineBoundary(t,n,!1)),!n&&o.head==r.from&&r.length){let i=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&t.head!=r.from+i&&(o=d.cursor(r.from+i))}return o}var fr= e=>D(e, t=>R(e,t,!0)),hr= e=>D(e, t=>R(e,t,!1)),dr= e=>D(e, t=>R(e,t,!S(e))),mr= e=>D(e, t=>R(e,t,S(e))),pr= e=>D(e, t=>d.cursor(e.lineBlockAt(t.head).from,1)),gr= e=>D(e, t=>d.cursor(e.lineBlockAt(t.head).to,-1));function yr(e, t, n){let r=!1,o=V(e.selection, i=>{let s=q(e,i.head,-1)||q(e,i.head,1)||i.head>0&&q(e,i.head-1,1)||i.head<e.doc.length&&q(e,i.head+1,-1);if(!s||!s.end)return i;r=!0;let l=s.start.from==i.head?s.end.to:s.end.from;return n?d.range(i.anchor,l):d.cursor(l)});return r?(t(w(e,o)),!0):!1}var xr=({state:e,dispatch:t})=>yr(e,t,!1);function L(e, t){let n=V(e.state.selection, r=>{let o=t(r);return d.range(r.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(e.state.selection)?!1:(e.dispatch(w(e.state,n)),!0)}function sn(e, t){return L(e, n=>e.moveByChar(n,t))}var ln= e=>sn(e,!S(e)),cn= e=>sn(e,S(e));function an(e, t){return L(e, n=>e.moveByGroup(n,t))}var kr= e=>an(e,!S(e)),Sr= e=>an(e,S(e));var br= e=>L(e, t=>me(e.state,t,!S(e))),Cr= e=>L(e, t=>me(e.state,t,S(e)));function un(e, t){return L(e, n=>e.moveVertically(n,t))}var fn= e=>un(e,!1),hn= e=>un(e,!0);function dn(e, t){return L(e, n=>e.moveVertically(n,t,rn(e).height))}var It= e=>dn(e,!1),Pt= e=>dn(e,!0),Ar= e=>L(e, t=>R(e,t,!0)),Mr= e=>L(e, t=>R(e,t,!1)),vr= e=>L(e, t=>R(e,t,!S(e))),Lr= e=>L(e, t=>R(e,t,S(e))),Br= e=>L(e, t=>d.cursor(e.lineBlockAt(t.head).from)),Dr= e=>L(e, t=>d.cursor(e.lineBlockAt(t.head).to)),Wt=({state:e,dispatch:t})=>(t(w(e,{anchor:0})),!0),qt=({state:e,dispatch:t})=>(t(w(e,{anchor:e.doc.length})),!0),Nt=({state:e,dispatch:t})=>(t(w(e,{anchor:e.selection.main.anchor,head:0})),!0),Gt=({state:e,dispatch:t})=>(t(w(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),wr=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),Tr=({state:e,dispatch:t})=>{let n=pe(e).map(({from:r,to:o})=>d.range(r,Math.min(o+1,e.doc.length)));return t(e.update({selection:d.create(n),userEvent:"select"})),!0},Er=({state:e,dispatch:t})=>{let n=V(e.selection, r=>{let o=ce(e),i=o.resolveStack(r.from,1);if(r.empty){let s=o.resolveStack(r.from,-1);s.node.from>=i.node.from&&s.node.to<=i.node.to&&(i=s)}for(let s=i; s; s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&s.next)return d.range(l.to,l.from)}return r});return n.eq(e.selection)?!1:(t(w(e,n)),!0)},Rr=({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=d.create([n.main]):n.main.empty||(r=d.create([d.cursor(n.main.head)])),r?(t(w(e,r)),!0):!1};function Y(e, t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,o=r.changeByRange(i=>{let{from:s,to:l}=i;if(s==l){let c=t(i);c<s?(n="delete.backward",c=ue(e,c,!1)):c>s&&(n="delete.forward",c=ue(e,c,!0)),s=Math.min(s,c),l=Math.max(l,c)}else s=ue(e,s,!1),l=ue(e,l,!0);return s==l?{range:i}:{changes:{from:s,to:l},range:d.cursor(s,s<i.head?-1:1)}});return o.changes.empty?!1:(e.dispatch(r.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?x.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function ue(e, t, n){if(e instanceof x)for(let r of e.state.facet(x.atomicRanges).map(o=>o(e)))r.between(t,t,(o, i)=>{o<t&&i>t&&(t=n?i:o)});return t}var mn=(e, t, n)=>Y(e, r=>{let o=r.from,{state:i}=e,s=i.doc.lineAt(o),l,c;if(n&&!t&&o>s.from&&o<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,o-s.from))){if(l[l.length-1]=="	")return o-1;let a=ie(l,i.tabSize),u=a%ae(i)||ae(i);for(let f=0; f<u&&l[l.length-1-f]==" "; f++)o--;c=o}else c=T(s.text,o-s.from,t,t)+s.from,c==o&&s.number!=(t?i.doc.lines:1)?c+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,o-s.from))&&(c=T(s.text,c-s.from,!1,!1)+s.from);return c}),Ve= e=>mn(e,!1,!0);var pn= e=>mn(e,!0,!1),gn=(e, t)=>Y(e, n=>{let r=n.head,{state:o}=e,i=o.doc.lineAt(r),s=o.charCategorizer(r);for(let l=null;;){if(r==(t?i.to:i.from)){r==n.head&&i.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let c=T(i.text,r-i.from,t)+i.from,a=i.text.slice(Math.min(r,c)-i.from,Math.max(r,c)-i.from),u=s(a);if(l!=null&&u!=l)break;(a!=" "||r!=n.head)&&(l=u),r=c}return r}),yn= e=>gn(e,!1),Fr= e=>gn(e,!0),Or= e=>Y(e, t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)});var Ir= e=>Y(e, t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),Pr= e=>Y(e, t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)});var Wr=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Re.of(["",""])},range:d.cursor(r.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},qr=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{if(!r.empty||r.from==0||r.from==e.doc.length)return{range:r};let o=r.from,i=e.doc.lineAt(o),s=o==i.from?o-1:T(i.text,o-i.from,!1)+i.from,l=o==i.to?o+1:T(i.text,o-i.from,!0)+i.from;return{changes:{from:s,to:l,insert:e.doc.slice(o,l).append(e.doc.slice(s,o))},range:d.cursor(l)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function pe(e){let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.from),i=e.doc.lineAt(r.to);if(!r.empty&&r.to==i.from&&(i=e.doc.lineAt(r.to-1)),n>=o.number){let s=t[t.length-1];s.to=i.to,s.ranges.push(r)}else t.push({from:o.from,to:i.to,ranges:[r]});n=i.number+1}return t}function xn(e, t, n){if(e.readOnly)return!1;let r=[],o=[];for(let i of pe(e)){if(n?i.to==e.doc.length:i.from==0)continue;let s=e.doc.lineAt(n?i.to+1:i.from-1),l=s.length+1;if(n){r.push({from:i.to,to:s.to},{from:i.from,insert:s.text+e.lineBreak});for(let c of i.ranges)o.push(d.range(Math.min(e.doc.length,c.anchor+l),Math.min(e.doc.length,c.head+l)))}else{r.push({from:s.from,to:i.from},{from:i.to,insert:e.lineBreak+s.text});for(let c of i.ranges)o.push(d.range(c.anchor-l,c.head-l))}}return r.length?(t(e.update({changes:r,scrollIntoView:!0,selection:d.create(o,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Nr=({state:e,dispatch:t})=>xn(e,t,!1),Gr=({state:e,dispatch:t})=>xn(e,t,!0);function kn(e, t, n){if(e.readOnly)return!1;let r=[];for(let o of pe(e))n?r.push({from:o.from,insert:e.doc.slice(o.from,o.to)+e.lineBreak}):r.push({from:o.to,insert:e.lineBreak+e.doc.slice(o.from,o.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var Vr=({state:e,dispatch:t})=>kn(e,t,!1),zr=({state:e,dispatch:t})=>kn(e,t,!0),Ur= e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(pe(t).map(({from:o,to:i})=>(o>0?o--:i<t.doc.length&&i++,{from:o,to:i}))),r=V(t.selection, o=>{let i;if(e.lineWrapping){let s=e.lineBlockAt(o.head),l=e.coordsAtPos(o.head,o.assoc||1);l&&(i=s.bottom+e.documentTop-l.bottom+e.defaultLineHeight/2)}return e.moveVertically(o,!0,i)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function $r(e, t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=ce(e).resolveInner(t),r=n.childBefore(t),o=n.childAfter(t),i;return r&&o&&r.to<=t&&o.from>=t&&(i=r.type.prop(le.closedBy))&&i.indexOf(o.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(r.to,o.from))?{from:r.to,to:o.from}:null}var Vt=Sn(!1),Hr=Sn(!0);function Sn(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(o=>{let{from:i,to:s}=o,l=t.doc.lineAt(i),c=!e&&i==s&&$r(t,i);e&&(i=s=(s<=l.to?l:t.doc.lineAt(s)).to);let a=new Ie(t,{simulateBreak:i,simulateDoubleBreak:!!c}),u=Oe(a,i);for(u==null&&(u=ie(/^\s*/.exec(t.doc.lineAt(i).text)[0],t.tabSize)); s<l.to&&/\s/.test(l.text[s-l.from]);)s++;c?{from:i,to:s}=c:i>l.from&&i<l.from+100&&!/\S/.test(l.text.slice(0,i))&&(i=l.from);let f=["",_(t,u)];return c&&f.push(_(t,a.lineIndent(l.from,-1))),{changes:{from:i,to:s,insert:Re.of(f)},range:d.cursor(i+1+f[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function $e(e, t){let n=-1;return e.changeByRange(r=>{let o=[];for(let s=r.from; s<=r.to;){let l=e.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(t(l,o,r),n=l.number),s=l.to+1}let i=e.changes(o);return{changes:o,range:d.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}var Kr=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Ie(e,{overrideIndentation: i=>{let s=n[i];return s??-1}}),o=$e(e,(i, s, l)=>{let c=Oe(r,i.from);if(c==null)return;/\S/.test(i.text)||(c=0);let a=/^\s*/.exec(i.text)[0],u=_(e,c);(a!=u||l.from<i.from+a.length)&&(n[i.from]=c,s.push({from:i.from,to:i.from+a.length,insert:u}))});return o.changes.empty||t(e.update(o,{userEvent:"indent"})),!0},bn=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update($e(e,(n, r)=>{r.push({from:n.from,insert:e.facet(At)})}),{userEvent:"input.indent"})),!0),Cn=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update($e(e,(n, r)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let i=ie(o,e.tabSize),s=0,l=_(e,Math.max(0,i-ae(e)));for(; s<o.length&&s<l.length&&o.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+o.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),Jr= e=>(e.setTabFocusMode(),!0);var _r=[{key:"Ctrl-b",run:Zt,shift:ln,preventDefault:!0},{key:"Ctrl-f",run:Xt,shift:cn},{key:"Ctrl-p",run:tn,shift:fn},{key:"Ctrl-n",run:nn,shift:hn},{key:"Ctrl-a",run:pr,shift:Br},{key:"Ctrl-e",run:gr,shift:Dr},{key:"Ctrl-d",run:pn},{key:"Ctrl-h",run:Ve},{key:"Ctrl-k",run:Or},{key:"Ctrl-Alt-h",run:yn},{key:"Ctrl-o",run:Wr},{key:"Ctrl-t",run:qr},{key:"Ctrl-v",run:Ge}],jr=[{key:"ArrowLeft",run:Zt,shift:ln,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:sr,shift:kr,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:dr,shift:vr,preventDefault:!0},{key:"ArrowRight",run:Xt,shift:cn,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:lr,shift:Sr,preventDefault:!0},{mac:"Cmd-ArrowRight",run:mr,shift:Lr,preventDefault:!0},{key:"ArrowUp",run:tn,shift:fn,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Wt,shift:Nt},{mac:"Ctrl-ArrowUp",run:Ot,shift:It},{key:"ArrowDown",run:nn,shift:hn,preventDefault:!0},{mac:"Cmd-ArrowDown",run:qt,shift:Gt},{mac:"Ctrl-ArrowDown",run:Ge,shift:Pt},{key:"PageUp",run:Ot,shift:It},{key:"PageDown",run:Ge,shift:Pt},{key:"Home",run:hr,shift:Mr,preventDefault:!0},{key:"Mod-Home",run:Wt,shift:Nt},{key:"End",run:fr,shift:Ar,preventDefault:!0},{key:"Mod-End",run:qt,shift:Gt},{key:"Enter",run:Vt,shift:Vt},{key:"Mod-a",run:wr},{key:"Backspace",run:Ve,shift:Ve},{key:"Delete",run:pn},{key:"Mod-Backspace",mac:"Alt-Backspace",run:yn},{key:"Mod-Delete",mac:"Alt-Delete",run:Fr},{mac:"Mod-Backspace",run:Ir},{mac:"Mod-Delete",run:Pr}].concat(_r.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),An=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ar,shift:br},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:ur,shift:Cr},{key:"Alt-ArrowUp",run:Nr},{key:"Shift-Alt-ArrowUp",run:Vr},{key:"Alt-ArrowDown",run:Gr},{key:"Shift-Alt-ArrowDown",run:zr},{key:"Escape",run:Rr},{key:"Mod-Enter",run:Hr},{key:"Alt-l",mac:"Ctrl-l",run:Tr},{key:"Mod-i",run:Er,preventDefault:!0},{key:"Mod-[",run:Cn},{key:"Mod-]",run:bn},{key:"Mod-Alt-\\",run:Kr},{key:"Shift-Mod-k",run:Ur},{key:"Shift-Mod-\\",run:xr},{key:"Mod-/",run:Un},{key:"Alt-A",run:Hn},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Jr}].concat(jr),Po={key:"Tab",run:bn,shift:Cn};function m(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];typeof o=="string"?e.setAttribute(r,o):o!=null&&(e[r]=o)}t++}for(; t<arguments.length; t++)Mn(e,arguments[t]);return e}function Mn(e, t){if(typeof t=="string")e.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)e.appendChild(t);else if(Array.isArray(t))for(var n=0; n<t.length; n++)Mn(e,t[n]);else throw new RangeError("Unsupported child node: "+t)}var vn=typeof String.prototype.normalize=="function"? e=>e.normalize("NFKD"): e=>e,O=class{constructor(t, n, r=0, o=t.length, i, s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,o),this.bufferStart=r,this.normalize=i? l=>i(vn(l)):vn,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ot(this.buffer,this.bufferPos)}next(){for(; this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let n=it(t),r=this.bufferStart+this.bufferPos;this.bufferPos+=st(t);let o=this.normalize(n);if(o.length)for(let i=0,s=r;; i++){let l=o.charCodeAt(i),c=this.match(l,s,this.bufferPos+this.bufferStart);if(i==o.length-1){if(c)return this.value=c,this;break}s==r&&i<n.length&&n.charCodeAt(i)==l&&s++}}}match(t, n, r){let o=null;for(let i=0; i<this.matches.length; i+=2){let s=this.matches[i],l=!1;this.query.charCodeAt(s)==t&&(s==this.query.length-1?o={from:this.matches[i+1],to:r}:(this.matches[i]++,l=!0)),l||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?o={from:n,to:r}:this.matches.push(1,n)),o&&this.test&&!this.test(o.from,o.to,this.buffer,this.bufferStart)&&(o=null),o}};typeof Symbol<"u"&&(O.prototype[Symbol.iterator]=function(){return this});var wn={from:-1,to:-1,match:/.*/.exec("")},Ze="gm"+(/x/.unicode==null?"":"u"),xe=class{constructor(t, n, r, o=0, i=t.length){if(this.text=t,this.to=i,this.curLine="",this.done=!1,this.value=wn,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Se(t,n,r,o,i);this.re=new RegExp(n,Ze+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=t.iter();let s=t.lineAt(o);this.curLineStart=s.from,this.matchPos=be(t,o),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,o=r+n[0].length;if(this.matchPos=be(this.text,o+(r==o?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<o||r>this.value.to)&&(!this.test||this.test(r,o,n)))return this.value={from:r,to:o,match:n},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}},He=new WeakMap,ke=class e{constructor(t, n){this.from=t,this.text=n}get to(){return this.from+this.text.length}static get(t, n, r){let o=He.get(t);if(!o||o.from>=r||o.to<=n){let l=new e(n,t.sliceString(n,r));return He.set(t,l),l}if(o.from==n&&o.to==r)return o;let{text:i,from:s}=o;return s>n&&(i=t.sliceString(n,s)+i,s=n),o.to<r&&(i+=t.sliceString(o.to,r)),He.set(t,new e(s,i)),new e(n,i.slice(n-s,r-s))}},Se=class{constructor(t, n, r, o, i){this.text=t,this.to=i,this.done=!1,this.value=wn,this.matchPos=be(t,o),this.re=new RegExp(n,Ze+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=ke.get(t,o,this.chunkEnd(o+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==t&&(this.re.lastIndex=t+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,o=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,o,n)))return this.value={from:r,to:o,match:n},this.matchPos=be(this.text,o+(r==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ke.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(xe.prototype[Symbol.iterator]=Se.prototype[Symbol.iterator]=function(){return this});function Yr(e){try{return new RegExp(e,Ze),!0}catch{return!1}}function be(e, t){if(t>=e.length)return t;let n=e.lineAt(t),r;for(; t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function Ke(e){let t=String(e.state.doc.lineAt(e.state.selection.main.head).number),n=m("input",{class:"cm-textfield",name:"line",value:t}),r=m("form",{class:"cm-gotoLine",onkeydown: i=>{i.keyCode==27?(i.preventDefault(),e.dispatch({effects:Ce.of(!1)}),e.focus()):i.keyCode==13&&(i.preventDefault(),o())},onsubmit: i=>{i.preventDefault(),o()}},m("label",e.state.phrase("Go to line"),": ",n)," ",m("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function o(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!i)return;let{state:s}=e,l=s.doc.lineAt(s.selection.main.head),[,c,a,u,f]=i,h=u?+u.slice(1):0,p=a?+a:l.number;if(a&&f){let g=p/100;c&&(g=g*(c=="-"?-1:1)+l.number/s.doc.lines),p=Math.round(s.doc.lines*g)}else a&&c&&(p=p*(c=="-"?-1:1)+l.number);let k=s.doc.line(Math.max(1,Math.min(s.doc.lines,p))),K=d.cursor(k.from+Math.max(0,Math.min(h,k.length)));e.dispatch({effects:[Ce.of(!1),x.scrollIntoView(K.from,{y:"center"})],selection:K}),e.focus()}return{dom:r}}var Ce=b.define(),Ln=I.define({create(){return!0},update(e, t){for(let n of t.effects)n.is(Ce)&&(e=n.value);return e},provide: e=>J.from(e, t=>t?Ke:null)}),Zr= e=>{let t=W(e,Ke);if(!t){let n=[Ce.of(!0)];e.state.field(Ln,!1)==null&&n.push(b.appendConfig.of([Ln,Xr])),e.dispatch({effects:n}),t=W(e,Ke)}return t&&t.dom.querySelector("input").select(),!0},Xr=x.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Qr={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Tn=E.define({combine(e){return P(e,Qr,{highlightWordAroundCursor:(t, n)=>t||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function En(e){let t=[oo,ro];return e&&t.push(Tn.of(e)),t}var eo=y.mark({class:"cm-selectionMatch"}),to=y.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Bn(e, t, n, r){return(n==0||e(t.sliceDoc(n-1,n))!=C.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=C.Word)}function no(e, t, n, r){return e(t.sliceDoc(n,n+1))==C.Word&&e(t.sliceDoc(r-1,r))==C.Word}var ro=se.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Tn),{state:n}=e,r=n.selection;if(r.ranges.length>1)return y.none;let o=r.main,i,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return y.none;let c=n.wordAt(o.head);if(!c)return y.none;s=n.charCategorizer(o.head),i=n.sliceDoc(c.from,c.to)}else{let c=o.to-o.from;if(c<t.minSelectionLength||c>200)return y.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!(Bn(s,n,o.from,o.to)&&no(s,n,o.from,o.to)))return y.none}else if(i=n.sliceDoc(o.from,o.to),!i)return y.none}let l=[];for(let c of e.visibleRanges){let a=new O(n.doc,i,c.from,c.to);for(; !a.next().done;){let{from:u,to:f}=a.value;if((!s||Bn(s,n,u,f))&&(o.empty&&u<=o.from&&f>=o.to?l.push(to.range(u,f)):(u>=o.to||f<=o.from)&&l.push(eo.range(u,f)),l.length>t.maxMatches))return y.none}}return y.set(l)}},{decorations: e=>e.decorations}),oo=x.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),io=({state:e,dispatch:t})=>{let{selection:n}=e,r=d.create(n.ranges.map(o=>e.wordAt(o.head)||d.cursor(o.head)),n.mainIndex);return r.eq(n)?!1:(t(e.update({selection:r})),!0)};function so(e, t){let{main:n,ranges:r}=e.selection,o=e.wordAt(n.head),i=o&&o.from==n.from&&o.to==n.to;for(let s=!1,l=new O(e.doc,t,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new O(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(c=>c.from==l.value.from))continue;if(i){let c=e.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}var lo=({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(i=>i.from===i.to))return io({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(i=>e.sliceDoc(i.from,i.to)!=r))return!1;let o=so(e,r);return o?(t(e.update({selection:e.selection.addRange(d.range(o.from,o.to),!1),effects:x.scrollIntoView(o.to)})),!0):!1},$=E.define({combine(e){return P(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel: t=>new Ye(t),scrollToMatch: t=>x.scrollIntoView(t)})}});var Ae=class{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||Yr(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(n, r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new _e(this):new Je(this)}getCursor(t,n=0,r){let o=t.doc?t:re.create({doc:t});return r==null&&(r=o.doc.length),this.regexp?U(this,o,n,r):z(this,o,n,r)}},Me=class{constructor(t){this.spec=t}};function z(e,t,n,r){return new O(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:o=>o.toLowerCase(),e.wholeWord?co(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function co(e,t){return(n,r,o,i)=>((i>n||i+o.length<r)&&(i=Math.max(0,n-2),o=e.sliceString(i,Math.min(e.length,r+2))),(t(ve(o,n-i))!=C.Word||t(Le(o,n-i))!=C.Word)&&(t(Le(o,r-i))!=C.Word||t(ve(o,r-i))!=C.Word))}var Je=class extends Me{constructor(t){super(t)}nextMatch(t,n,r){let o=z(this.spec,t,r,t.doc.length).nextOverlapping();if(o.done){let i=Math.min(t.doc.length,n+this.spec.unquoted.length);o=z(this.spec,t,0,i).nextOverlapping()}return o.done||o.value.from==n&&o.value.to==r?null:o.value}prevMatchInRange(t,n,r){for(let o=r;;){let i=Math.max(n,o-1e4-this.spec.unquoted.length),s=z(this.spec,t,i,o),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(i==n)return null;o-=1e4}}prevMatch(t,n,r){let o=this.prevMatchInRange(t,0,n);return o||(o=this.prevMatchInRange(t,Math.max(0,r-this.spec.unquoted.length),t.doc.length)),o&&(o.from!=n||o.to!=r)?o:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,n){let r=z(this.spec,t,0,t.doc.length),o=[];for(;!r.next().done;){if(o.length>=n)return null;o.push(r.value)}return o}highlight(t,n,r,o){let i=z(this.spec,t,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}};function U(e,t,n,r){return new xe(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?ao(t.charCategorizer(t.selection.main.head)):void 0},n,r)}function ve(e,t){return e.slice(T(e,t,!1),t)}function Le(e,t){return e.slice(t,T(e,t))}function ao(e){return(t,n,r)=>!r[0].length||(e(ve(r.input,r.index))!=C.Word||e(Le(r.input,r.index))!=C.Word)&&(e(Le(r.input,r.index+r[0].length))!=C.Word||e(ve(r.input,r.index+r[0].length))!=C.Word)}var _e=class extends Me{nextMatch(t,n,r){let o=U(this.spec,t,r,t.doc.length).next();return o.done&&(o=U(this.spec,t,0,n).next()),o.done?null:o.value}prevMatchInRange(t,n,r){for(let o=1;;o++){let i=Math.max(n,r-o*1e4),s=U(this.spec,t,i,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(i==n||l.from>i+10))return l;if(i==n)return null}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?t.match[0]:r!="0"&&+r<t.match.length?t.match[r]:n)}matchAll(t,n){let r=U(this.spec,t,0,t.doc.length),o=[];for(;!r.next().done;){if(o.length>=n)return null;o.push(r.value)}return o}highlight(t,n,r,o){let i=U(this.spec,t,Math.max(0,n-250),Math.min(r+250,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}},X=b.define(),Xe=b.define(),F=I.define({create(e){return new Z(je(e).create(),null)},update(e,t){for(let n of t.effects)n.is(X)?e=new Z(n.value.create(),e.panel):n.is(Xe)&&(e=new Z(e.query,n.value?Qe:null));return e},provide:e=>J.from(e,t=>t.panel)});var Z=class{constructor(t,n){this.query=t,this.panel=n}},uo=y.mark({class:"cm-searchMatch"}),fo=y.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ho=se.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(F))}update(e){let t=e.state.field(F);(t!=e.startState.field(F)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return y.none;let{view:n}=this,r=new oe;for(let o=0,i=n.visibleRanges,s=i.length;o<s;o++){let{from:l,to:c}=i[o];for(;o<s-1&&c>i[o+1].from-2*250;)c=i[++o].to;e.highlight(n.state,l,c,(a,u)=>{let f=n.state.selection.ranges.some(h=>h.from==a&&h.to==u);r.add(a,u,f?fo:uo)})}return r.finish()}},{decorations:e=>e.decorations});function Q(e){return t=>{let n=t.state.field(F,!1);return n&&n.query.spec.valid?e(t,n):On(t)}}var Be=Q((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);if(!r)return!1;let o=d.single(r.from,r.to),i=e.state.facet($);return e.dispatch({selection:o,effects:[et(e,r),i.scrollToMatch(o.main,e)],userEvent:"select.search"}),Fn(e),!0}),De=Q((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,o=t.prevMatch(n,r,r);if(!o)return!1;let i=d.single(o.from,o.to),s=e.state.facet($);return e.dispatch({selection:i,effects:[et(e,o),s.scrollToMatch(i.main,e)],userEvent:"select.search"}),Fn(e),!0}),mo=Q((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!n||!n.length?!1:(e.dispatch({selection:d.create(n.map(r=>d.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),po=({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:o}=n.main,i=[],s=0;for(let l=new O(e.doc,e.sliceDoc(r,o));!l.next().done;){if(i.length>1e3)return!1;l.value.from==r&&(s=i.length),i.push(d.range(l.value.from,l.value.to))}return t(e.update({selection:d.create(i,s),userEvent:"select.search.matches"})),!0},Dn=Q((e,{query:t})=>{let{state:n}=e,{from:r,to:o}=n.selection.main;if(n.readOnly)return!1;let i=t.nextMatch(n,r,r);if(!i)return!1;let s=i,l=[],c,a,u=[];if(s.from==r&&s.to==o&&(a=n.toText(t.getReplacement(s)),l.push({from:s.from,to:s.to,insert:a}),s=t.nextMatch(n,s.from,s.to),u.push(x.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let f=l.length==0||l[0].from>=i.to?0:i.to-i.from-a.length;c=d.single(s.from-f,s.to-f),u.push(et(e,s)),u.push(n.facet($).scrollToMatch(c.main,e))}return e.dispatch({changes:l,selection:c,effects:u,userEvent:"input.replace"}),!0}),go=Q((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(o=>{let{from:i,to:s}=o;return{from:i,to:s,insert:t.getReplacement(o)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:x.announce.of(r),userEvent:"input.replace.all"}),!0});function Qe(e){return e.state.facet($).createPanel(e)}function je(e,t){var n,r,o,i,s;let l=e.selection.main,c=l.empty||l.to>l.from+100?"":e.sliceDoc(l.from,l.to);if(t&&!c)return t;let a=e.facet($);return new Ae({search:((n=t?.literal)!==null&&n!==void 0?n:a.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(r=t?.caseSensitive)!==null&&r!==void 0?r:a.caseSensitive,literal:(o=t?.literal)!==null&&o!==void 0?o:a.literal,regexp:(i=t?.regexp)!==null&&i!==void 0?i:a.regexp,wholeWord:(s=t?.wholeWord)!==null&&s!==void 0?s:a.wholeWord})}function Rn(e){let t=W(e,Qe);return t&&t.dom.querySelector("[main-field]")}function Fn(e){let t=Rn(e);t&&t==e.root.activeElement&&t.select()}var On=e=>{let t=e.state.field(F,!1);if(t&&t.panel){let n=Rn(e);if(n&&n!=e.root.activeElement){let r=je(e.state,t.query.spec);r.valid&&e.dispatch({effects:X.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[Xe.of(!0),t?X.of(je(e.state,t.query.spec)):b.appendConfig.of(xo)]});return!0},In=e=>{let t=e.state.field(F,!1);if(!t||!t.panel)return!1;let n=W(e,Qe);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Xe.of(!1)}),!0},Pn=[{key:"Mod-f",run:On,scope:"editor search-panel"},{key:"F3",run:Be,shift:De,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Be,shift:De,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:In,scope:"editor search-panel"},{key:"Mod-Shift-l",run:po},{key:"Mod-Alt-g",run:Zr},{key:"Mod-d",run:lo,preventDefault:!0}],Ye=class{constructor(t){this.view=t;let n=this.query=t.state.field(F).query.spec;this.commit=this.commit.bind(this),this.searchField=m("input",{value:n.search,placeholder:A(t,"Find"),"aria-label":A(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=m("input",{value:n.replace,placeholder:A(t,"Replace"),"aria-label":A(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=m("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=m("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=m("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(o,i,s){return m("button",{class:"cm-button",name:o,onclick:i,type:"button"},s)}this.dom=m("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,r("next",()=>Be(t),[A(t,"next")]),r("prev",()=>De(t),[A(t,"previous")]),r("select",()=>mo(t),[A(t,"all")]),m("label",null,[this.caseField,A(t,"match case")]),m("label",null,[this.reField,A(t,"regexp")]),m("label",null,[this.wordField,A(t,"by word")]),...t.state.readOnly?[]:[m("br"),this.replaceField,r("replace",()=>Dn(t),[A(t,"replace")]),r("replaceAll",()=>go(t),[A(t,"replace all")])],m("button",{name:"close",onclick:()=>In(t),"aria-label":A(t,"close"),type:"button"},["\xD7"])])}commit(){let t=new Ae({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:X.of(t)}))}keydown(t){dt(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?De:Be)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),Dn(this.view))}update(t){for(let n of t.transactions)for(let r of n.effects)r.is(X)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet($).top}};function A(e,t){return e.state.phrase(t)}var ge=30,ye=/[\s\.,:;?!]/;function et(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),o=e.state.doc.lineAt(n).to,i=Math.max(r.from,t-ge),s=Math.min(o,n+ge),l=e.state.sliceDoc(i,s);if(i!=r.from){for(let c=0;c<ge;c++)if(!ye.test(l[c+1])&&ye.test(l[c])){l=l.slice(c);break}}if(s!=o){for(let c=l.length-1;c>l.length-ge;c--)if(!ye.test(l[c-1])&&ye.test(l[c])){l=l.slice(0,c);break}}return x.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${r.number}.`)}var yo=x.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),xo=[F,at.low(ho),yo];var Te=class{constructor(t,n,r){this.from=t,this.to=n,this.diagnostic=r}},N=class e{constructor(t,n,r){this.diagnostics=t,this.panel=n,this.selected=r}static init(t,n,r){let o=t,i=r.facet(ee).markerFilter;i&&(o=i(o,r));let s=t.slice().sort((f,h)=>f.from-h.from||f.to-h.to),l=new oe,c=[],a=0;for(let f=0;;){let h=f==s.length?null:s[f];if(!h&&!c.length)break;let p,k;for(c.length?(p=a,k=c.reduce((g,G)=>Math.min(g,G.to),h&&h.from>p?h.from:1e8)):(p=h.from,k=h.to,c.push(h),f++);f<s.length;){let g=s[f];if(g.from==p&&(g.to>g.from||g.to==p))c.push(g),f++,k=Math.min(g.to,k);else{k=Math.min(g.from,k);break}}let K=wo(c);if(c.some(g=>g.from==g.to||g.from==g.to-1&&r.doc.lineAt(g.from).to==g.from))l.add(p,p,y.widget({widget:new tt(K),diagnostics:c.slice()}));else{let g=c.reduce((G,rt)=>rt.markClass?G+" "+rt.markClass:G,"");l.add(p,k,y.mark({class:"cm-lintRange cm-lintRange-"+K+g,diagnostics:c.slice(),inclusiveEnd:c.some(G=>G.to>k)}))}a=k;for(let g=0;g<c.length;g++)c[g].to<=a&&c.splice(g--,1)}let u=l.finish();return new e(u,n,H(u))}};function H(e,t=null,n=0){let r=null;return e.between(n,1e9,(o,i,{spec:s})=>{if(!(t&&s.diagnostics.indexOf(t)<0))if(!r)r=new Te(o,i,t||s.diagnostics[0]);else{if(s.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new Te(r.from,i,r.diagnostic)}}),r}function ko(e,t){let n=t.pos,r=t.end||n,o=e.state.facet(ee).hideOn(e,n,r);if(o!=null)return o;let i=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(s=>s.is(qn))||e.changes.touchesRange(i.from,Math.max(i.to,r)))}function So(e,t){return e.field(M,!1)?t:t.concat(b.appendConfig.of(To))}var qn=b.define(),nt=b.define(),Nn=b.define(),M=I.define({create(){return new N(y.none,null,null)},update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),r=null,o=e.panel;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=H(n,e.selected.diagnostic,i)||H(n,null,i)}!n.size&&o&&t.state.facet(ee).autoPanel&&(o=null),e=new N(n,o,r)}for(let n of t.effects)if(n.is(qn)){let r=t.state.facet(ee).autoPanel?n.value.length?te.open:null:e.panel;e=N.init(n.value,r,t.state)}else n.is(nt)?e=new N(e.diagnostics,n.value?te.open:null,e.selected):n.is(Nn)&&(e=new N(e.diagnostics,e.panel,n.value));return e},provide:e=>[J.from(e,t=>t.panel),x.decorations.from(e,t=>t.diagnostics)]});var bo=y.mark({class:"cm-lintRange cm-lintRange-active"});function Co(e,t,n){let{diagnostics:r}=e.state.field(M),o,i=-1,s=-1;r.between(t-(n<0?1:0),t+(n>0?1:0),(c,a,{spec:u})=>{if(t>=c&&t<=a&&(c==a||(t>c||n>0)&&(t<a||n<0)))return o=u.diagnostics,i=c,s=a,!1});let l=e.state.facet(ee).tooltipFilter;return o&&l&&(o=l(o,e.state)),o?{pos:i,end:s,above:e.state.doc.lineAt(i).to<s,create(){return{dom:Ao(e,o)}}}:null}function Ao(e,t){return m("ul",{class:"cm-tooltip-lint"},t.map(n=>zn(e,n,!1)))}var Mo=e=>{let t=e.state.field(M,!1);(!t||!t.panel)&&e.dispatch({effects:So(e.state,[nt.of(!0)])});let n=W(e,te.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},Wn=e=>{let t=e.state.field(M,!1);return!t||!t.panel?!1:(e.dispatch({effects:nt.of(!1)}),!0)},vo=e=>{let t=e.state.field(M,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)};var Gn=[{key:"Mod-Shift-m",run:Mo,preventDefault:!0},{key:"F8",run:vo}];var ee=E.define({combine(e){return Object.assign({sources:e.map(t=>t.source).filter(t=>t!=null)},P(e.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,n)=>t?n?r=>t(r)||n(r):t:n}))}});function Vn(e){let t=[];if(e)e:for(let{name:n}of e){for(let r=0;r<n.length;r++){let o=n[r];if(/[a-zA-Z]/.test(o)&&!t.some(i=>i.toLowerCase()==o.toLowerCase())){t.push(o);continue e}}t.push("")}return t}function zn(e,t,n){var r;let o=n?Vn(t.actions):[];return m("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},m("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),(r=t.actions)===null||r===void 0?void 0:r.map((i,s)=>{let l=!1,c=h=>{if(h.preventDefault(),l)return;l=!0;let p=H(e.state.field(M).diagnostics,t);p&&i.apply(e,p.from,p.to)},{name:a}=i,u=o[s]?a.indexOf(o[s]):-1,f=u<0?a:[a.slice(0,u),m("u",a.slice(u,u+1)),a.slice(u+1)];return m("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${a}${u<0?"":` (access key "${o[s]})"`}.`},f)}),t.source&&m("div",{class:"cm-diagnosticSource"},t.source))}var tt=class extends ut{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return m("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},Ee=class{constructor(t,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=zn(t,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},te=class e{constructor(t){this.view=t,this.items=[];let n=o=>{if(o.keyCode==27)Wn(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:i}=this.items[this.selectedIndex],s=Vn(i.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==o.keyCode){let c=H(this.view.state.field(M).diagnostics,i);c&&i.actions[l].apply(t,c.from,c.to)}}else return;o.preventDefault()},r=o=>{for(let i=0;i<this.items.length;i++)this.items[i].dom.contains(o.target)&&this.moveSelection(i)};this.list=m("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=m("div",{class:"cm-panel-lint"},this.list,m("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Wn(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(M).selected;if(!t)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==t.diagnostic)return n;return-1}update(){let{diagnostics:t,selected:n}=this.view.state.field(M),r=0,o=!1,i=null,s=new Set;for(t.between(0,this.view.state.doc.length,(l,c,{spec:a})=>{for(let u of a.diagnostics){if(s.has(u))continue;s.add(u);let f=-1,h;for(let p=r;p<this.items.length;p++)if(this.items[p].diagnostic==u){f=p;break}f<0?(h=new Ee(this.view,u),this.items.splice(r,0,h),o=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),o=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),i=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new Ee(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:c})=>{let a=c.height/this.list.offsetHeight;l.top<c.top?this.list.scrollTop-=(c.top-l.top)/a:l.bottom>c.bottom&&(this.list.scrollTop+=(l.bottom-c.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let t=this.list.firstChild;function n(){let r=t;t=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;t!=r.dom;)n();t=r.dom.nextSibling}else this.list.insertBefore(r.dom,t);for(;t;)n()}moveSelection(t){if(this.selectedIndex<0)return;let n=this.view.state.field(M),r=H(n.diagnostics,this.items[t].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Nn.of(r)})}static open(t){return new e(t)}};function Lo(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function we(e){return Lo(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var Bo=x.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:we("#d11")},".cm-lintRange-warning":{backgroundImage:we("orange")},".cm-lintRange-info":{backgroundImage:we("#999")},".cm-lintRange-hint":{backgroundImage:we("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Do(e){return e=="error"?4:e=="warning"?3:e=="info"?2:1}function wo(e){let t="hint",n=1;for(let r of e){let o=Do(r.severity);o>n&&(n=o,t=r.severity)}return t}var To=[M,x.decorations.compute([M],e=>{let{selected:t,panel:n}=e.field(M);return!t||!n||t.from==t.to?y.none:y.set([bo.range(t.from,t.to)])}),St(Co,{hideOn:ko}),Bo];var li=[bt(),Ct(),gt(),Ht(),Lt(),mt(),pt(),re.allowMultipleSelections.of(!0),Mt(),Bt(Dt,{fallback:!0}),wt(),Tt(),Rt(),xt(),kt(),yt(),En(),ht.of([...Et,...An,...Pn,...jt,...vt,...Ft,...Gn])];export{An as a,Po as b,li as c};
